<h1 class="text-dark fw-medium mb-3 display-6">
  Bentornato, {{ authService.user?.firstName }}
</h1>
<h5 class="text-dark mb-0 fw-normal">
  Qui puoi gestire i contenuti e i test per la materia {{
  materiaService.materiaSelected()?.name }}.
</h5>

<div class="row mt-5">
  @for(link of quickLinks; track $index){
  <div class="col-12 col-md-6 col-lg-3 mb-4">
    <div class="card linkCard" [class.bg-warning]="link.alert">
      <div
        class="card-body d-flex flex-row align-items-center justify-content-center gap-3"
      >
        <div
          class="bg-primary rounded-circle d-flex flex-row justify-content-center align-items-center aspect-ratio-1"
          style="width: 60px; height: 60px"
        >
          <fa-icon
            [icon]="UsersIcon"
            class="text-white"
            style="font-size: 1.5rem"
          ></fa-icon>
        </div>
        <div
          class="flex-fill d-flex flex-column justify-content-start align-items-start"
        >
          <span class="">{{link.description}}</span>
          <h1 class="fw-bold" style="line-height: 0.8">{{link.value}}</h1>
        </div>
      </div>
    </div>
  </div>
  }
</div>

<div class="row mt-4">
  <div class="col-6 d-flex flex-column">
    <div class="card p-4 flex-fill" id="startWorkingCard">
      <div class="card-body">
        <span class="display-5 fw-medium text-dark" style="line-height: 1"
          >Inizia <br />ad usare Syllex</span
        >
        <div class="row mt-3">
          @for(action of quickActions; track $index){
          <div class="col-6 p-2">
            <button
              class="btn btn-primary btn-lg w-100 actionButton d-flex flex-column gap-1"
              (click)="action.action()"
            >
              <fa-icon [icon]="action.icon"></fa-icon>
              {{action.label}}
            </button>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
  <div class="col-6 d-flex flex-column">
    <div class="card overflow-scroll flex-fill p-4" style="height: 300px">
      <div class="d-flex flex-row justify-content-between text-dark">
        <h4 class="text-dark fw-bold mb-3">Comunica con i tuoi studenti</h4>
        <a routerLink="/t/comunicazioni">Vedi tutte</a>
      </div>
      <div class="card-body">
        <div class="h-100 overflow-scroll">
          @for(c of communications; track $index; let last = $last){
          <div
            class="border border-1 communicationCard rounded-syllex"
            [class.mb-3]="!last"
            [routerLink]="'/t/comunicazioni/edit/' + c._id"
          >
            <div class="card-body">
              <div
                class="fw-semibold mb-1 d-flex flex-row justify-content-between align-items-center"
              >
                <span>{{ c.title }}</span>
                @if(c.materialIds && c.materialIds.length > 0){
                <span
                  class="btn btn-sm icon-btn border-1 border-primary text-primary fw-bold"
                  >{{ c.materialIds.length }}
                  <fa-icon [icon]="AttachmentIcon"></fa-icon>
                </span>
                }
              </div>
              <p class="ellipsis-3-lines mb-2">{{ c.content }}</p>
              Creato il
              <small class="fw-semibold"
                >{{ c.createdAt | date:'short' }}</small
              >
            </div>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>

<section class="mt-5 card">
  <app-calendario></app-calendario>
</section>
