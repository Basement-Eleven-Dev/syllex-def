<h1 class="text-dark fw-medium mb-0 display-6">
  Bentornato, {{ authService.user?.firstName }}
</h1>
<p class="text-dark mb-0">
  Qui puoi gestire i contenuti e i test per la materia Scienze Nautiche
</p>

<div class="row mt-5">
  @for(link of quickLinks; track $index){
  <div class="col-12 col-md-6 col-lg-3 mb-4">
    <div
      class="card linkCard text-center h-100 py-1 test"
      [class.alert]="link.alert"
    >
      <div class="card-body d-flex flex-column align-items-center">
        <div class="flex-fill d-flex flex-column justify-content-center my-4">
          <span class="cardDescription">{{link.description}}</span>
          <span class="cardValue">{{link.value}}</span>
        </div>
        <a href="{{link.route}}" class="cardLink">{{link.routeString}}</a>
      </div>
    </div>
  </div>
  }
</div>

<div class="row mt-4">
  <div class="col-6 d-flex flex-column">
    <div class="card p-4 flex-fill" id="startWorkingCard">
      <div class="card-body">
        <span class="display-5 fw-medium text-dark" style="line-height: 1"
          >Inizia ad usare Syllex</span
        >
        <div class="row mt-3">
          @for(action of quickActions; track $index){
          <div class="col-6 p-2">
            <button
              class="btn btn-primary btn-lg w-100 actionButton d-flex flex-column gap-1"
              (click)="action.action()"
            >
              <fa-icon [icon]="action.icon"></fa-icon>
              {{action.label}}
            </button>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
  <div class="col-6 d-flex flex-column">
    <div class="card overflow-scroll flex-fill p-4" style="height: 300px">
      <div class="d-flex flex-row justify-content-between text-dark">
        <h4 class="text-dark fw-bold mb-3">Comunica con i tuoi studenti</h4>
        <a routerLink="/t/comunicazioni">Vedi tutte</a>
      </div>
      <div class="card-body">
        <div class="h-100 overflow-scroll">
          @for(c of communications; track $index; let last = $last){
          <div
            class="border border-1 communicationCard rounded-syllex"
            [class.mb-3]="!last"
            [routerLink]="'/t/comunicazioni/edit/' + c._id"
          >
            <div class="card-body">
              <div
                class="fw-semibold mb-1 d-flex flex-row justify-content-between align-items-center"
              >
                <span>{{ c.title }}</span>
                @if(c.materialIds && c.materialIds.length > 0){
                <span class="badge bg-primary ms-2 text-white fw-bold"
                  >{{ c.materialIds.length }}
                  <fa-icon [icon]="AttachmentIcon"></fa-icon>
                </span>
                }
              </div>
              <p class="ellipsis-3-lines mb-2">{{ c.content }}</p>
              Creato il
              <small class="fw-semibold"
                >{{ c.createdAt | date:'short' }}</small
              >
            </div>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>

<section class="mt-5">
  <app-calendario></app-calendario>
</section>
