<div class="d-flex flex-row align-items-center mb-5">
  <div>
    <h1 class="text-dark fw-bold mb-0 display-6">Lista dei test</h1>
    <p class="text-dark mb-0">
      Gestisci i test di valutazione da assegnare alle tue classi
    </p>
  </div>
  <button class="btn btn-primary btn-lg ms-auto py-3" routerLink="/t/tests/new">
    <fa-icon [icon]="PlusIcon"></fa-icon>
    Nuovo test
  </button>
</div>

<section class="form-section d-flex flex-row align-items-center mb-5 gap-3">
  <div>
    <label for="search-term" class="form-label fw-semibold text-dark"
      >Nome del test</label
    >
    <input
      type="text"
      class="form-control me-3 custom-input"
      id="search-term"
      placeholder="Cerca test..."
      style="min-width: 400px"
    />
  </div>

  <div>
    <label for="publication-status" class="form-label fw-semibold text-dark"
      >Stato di pubblicazione</label
    >
    <select
      class="form-select custom-input"
      style="max-width: 200px"
      id="publication-status"
    >
      <option value="">Stato</option>
      @for(status of ['bozza', 'pubblicato', 'archiviato']; track $index) {
      <option value="{{ status }}">{{ status | titlecase }}</option>
      }
    </select>
  </div>
  <div class="btn-group ms-auto">
    <button
      class="btn"
      [ngClass]="{'btn-outline-primary': viewType !== 'table', 'btn-secondary border-dark': viewType === 'table'}"
      (click)="onChangeViewType('table')"
    >
      <fa-icon [icon]="ListIcon"></fa-icon>
    </button>
    <button
      class="btn"
      [ngClass]="{'btn-outline-primary': viewType !== 'grid', 'btn-secondary border-dark': viewType == 'grid'}"
      (click)="onChangeViewType('grid')"
    >
      <fa-icon [icon]="GridIcon"></fa-icon>
    </button>
  </div>
</section>

@if(viewType === 'table'){
<app-test-table [tests]="tests"></app-test-table>
} @else {
<div class="row">
  @for(test of tests; track $index){
  <div class="col-12 col-lg-6 col-xl-4 mb-3">
    <app-test-card [test]="test"></app-test-card>
  </div>
  }
</div>
}

<div
  [class.inTableView]="viewType === 'table'"
  [class.inGridView]="viewType === 'grid'"
  class="mt-5"
>
  <ngb-pagination
    [collectionSize]="collectionSize"
    [(page)]="page"
    [pageSize]="pageSize"
    (pageChange)="onNewPageRequested()"
  >
  </ngb-pagination>

  <select
    class="form-select form-select-sm"
    style="width: auto"
    [(ngModel)]="pageSize"
    (ngModelChange)="onNewPageRequested()"
  >
    <option [ngValue]="5">5 per pagina</option>
    <option [ngValue]="10">10 per pagina</option>
    <option [ngValue]="20">20 per pagina</option>
  </select>
</div>
