<div class="d-flex flex-row align-items-center mb-5">
  <div>
    <h1 class="text-dark fw-bold mb-0 display-6">Banca Domande</h1>
    <p class="text-dark mb-0">
      Qui puoi trovare tutte le domande con cui comporre i test di
      <span class="fw-bold">{{ materiaService.materiaSelected()?.name }}</span>.
      Puoi cercare, filtrare e modificare le domande a tuo piacimento.
    </p>
  </div>
  <button
    class="btn btn-primary btn-lg ms-auto py-3 icon-btn"
    routerLink="/t/create-question"
  >
    <fa-icon [icon]="PlusIcon"></fa-icon>
    Nuova domanda
  </button>
</div>

<div class="row">
  <div class="col-6">
    <section class="h-100">
      <app-questions-search-filters
        (filtersChanged)="onFiltersChanged($event)"
      ></app-questions-search-filters>
    </section>
  </div>
  <div class="col-6">
    <section
      class="card h-100 d-flex flex-row align-items-center justify-content-around"
    >
      <div
        class="d-flex flex-column justify-content-center align-items-center text-dark"
      >
        <span class="fw-bold cardValue">{{ CollectionSize() }}</span>
        <span class="cardDescription"
          >domand{{ CollectionSize() === 1 ? 'a' : 'e' }}</span
        >
      </div>
      <div class="d-flex flex-column justify-content-center text-dark fs-4">
        <p class="cardDescription mb-0">
          {{ CollectionSize() }} Risposta aperta
        </p>
        <p class="cardDescription mb-0">{{ CollectionSize() }} Vero Falso</p>
        <p class="cardDescription mb-0">
          {{ CollectionSize() }} Scelta Multipla
        </p>
      </div>
    </section>
  </div>
</div>

@for(question of Questions(); track question._id; let last = $last; let i =
$index) {
<div class="mt-4">
  <div
    app-question-card
    [question]="question"
    [collapsed]="isQuestionCollapsed(question._id)"
    [showTestCompositionActions]="false"
    [showBancaActions]="true"
    [showExplanation]="true"
    [showPolicy]="true"
    [collapsable]="true"
    (onExpand)="onQuestionExpanded($event)"
  ></div>
</div>
}
<div class="mt-5 d-flex flex-row justify-content-between align-items-center">
  <ngb-pagination
    [collectionSize]="CollectionSize()"
    [page]="Page()"
    [pageSize]="PageSize()"
    (pageChange)="Page.set($event)"
  >
  </ngb-pagination>

  <select
    class="form-select form-select-sm"
    style="width: auto"
    [ngModel]="PageSize()"
    (ngModelChange)="PageSize.set($event); Page.set(1)"
  >
    <option [ngValue]="5">5 per pagina</option>
    <option [ngValue]="10">10 per pagina</option>
    <option [ngValue]="20">20 per pagina</option>
  </select>
</div>
