@if (IsLoading()) {
<div
  class="d-flex justify-content-center align-items-center"
  style="min-height: 400px"
>
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Caricamento...</span>
  </div>
</div>
} @if (ErrorMessage()) {
<div class="alert alert-danger" role="alert">{{ ErrorMessage() }}</div>
} @if (ClassNotFound()) {
<div class="alert alert-warning" role="alert">Classe non trovata</div>
} @if (ClassData() && !IsLoading()) {
<h1 class="text-dark fw-bold mb-0 display-6">{{ ClassData()!.name }}</h1>

<!-- Statistics Cards -->
<div class="row mt-5">
  @for (stat of Stats(); track $index) {
  <div class="col-12 col-md-6 col-lg-3 mb-3">
    <app-stat-card [stat]="stat" />
  </div>
  }
</div>

<!-- Content Sections -->
<div class="row mt-4">
  <!-- Section Navigation -->
  <div class="col-12 col-lg-2 mb-3 mb-lg-0">
    <div class="d-flex flex-column gap-2">
      @for (section of Sections; track section.Id) {
      <button
        type="button"
        class="p-3 rounded-syllex mb-0 section-link fs-6 fw-normal"
        [class.active]="ActiveSectionId() === section.Id"
        (click)="onSectionChange(section.Id)"
      >
        <fa-icon [icon]="section.Icon"></fa-icon>
        {{ section.Title }}
      </button>
      }
    </div>
  </div>

  <!-- Section Content -->
  <div class="col-12 col-lg-10">
    @if (ActiveSectionId() === 1) {
    <app-studenti-classe-table
      [classeId]="ClassData()!._id"
      [students]="StudentsData()"
      [testsCount]="AssignedTestsCount()"
    />
    } @else if (ActiveSectionId() === 2) {
    <app-statistiche-classe [classId]="ClassData()!._id" />
    }
  </div>
</div>
}
