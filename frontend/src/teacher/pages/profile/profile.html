<h1 class="text-dark fw-medium mb-3 display-6">Profilo</h1>
<h5 class="text-dark mb-0 fw-normal">Da qui puoi gestire il tuo account</h5>

@if(authService.user?.role === 'teacher') {
<div class="row mt-5">
  <div class="col-6">
    <section class="form-section">
      <label for="name" class="form-label text-dark">
        <fa-icon [icon]="BuildingIcon"></fa-icon>Organizzazione</label
      >
      <h4 class="fw-light text-dark" id="name">
        {{ authService.organizationName$ | async }}
      </h4>
    </section>
  </div>
</div>
} @else if(authService.user?.role === 'student') {
<div class="row mt-5">
  <div class="col-6">
    <section class="form-section">
      <label for="name" class="form-label text-dark">
        <fa-icon [icon]="BuildingIcon"></fa-icon>La tua Istituzione</label
      >
      <h4 class="fw-light text-dark" id="name">
        {{ authService.organizationName$ | async }}
      </h4>
    </section>
  </div>
</div>
}

<div class="row mt-5">
  <div class="col-6">
    <section class="form-section">
      <label for="name" class="form-label text-dark">Nome e Cognome</label>
      <h4 class="fw-light text-dark" id="name">
        {{ authService.user?.firstName }} {{ authService.user?.lastName }}
      </h4>
    </section>
  </div>
  <div class="col-6">
    <section class="form-section">
      <label for="name" class="form-label text-dark">Ruolo</label>
      <h4 class="fw-light text-dark" id="name">
        @switch(authService.user?.role) { @case('teacher'){Docente}
        @case('student'){Studente} @default{ {{ authService.user?.role }} } }
      </h4>
    </section>
  </div>
</div>
<div class="row mt-3">
  <div class="col-6">
    <section class="form-section">
      <label
        for="name"
        class="form-label text-dark w-100 d-flex align-items-center justify-content-between"
        >Email
        <button class="btn btn-link p-0 ms-2" (click)="onChangeEmail()">
          <fa-icon [icon]="EditIcon"></fa-icon> Modifica email
        </button>
      </label>
      <h4 class="fw-light text-dark" id="email">
        {{ authService.user?.email }}
      </h4>
    </section>
  </div>
  <div class="col-6">
    <section class="form-section">
      <label
        for="name"
        class="form-label text-dark w-100 d-flex align-items-center justify-content-between"
        >Password
        <button class="btn btn-link p-0 ms-2" (click)="onChangePassword()">
          <fa-icon [icon]="EditIcon"></fa-icon> Modifica password
        </button></label
      >
      <h4 class="fw-light text-dark" id="name">••••••••</h4>
    </section>
  </div>
</div>
@if(authService.user?.role === 'teacher') {
<div class="row mt-5 pb-5">
  <div class="col-12">
    <section class="form-section">
      <label for="name" class="form-label text-dark mb-4"
        >Materie di insegnamento</label
      >
      <div class="row">
        @for(materia of getMaterie(); track $index) {
        <div class="col-4 mb-3">
          <div class="card overflow-hidden position-relative">
            <fa-icon [icon]="BookIcon" [size]="'lg'" id="bookIcon" />
            <div class="card-body">
              <h5 class="card-title">{{ materia.name }}</h5>
              {{ countClasses(materia._id) || 'Nessuna' }} class{{
              countClasses(materia._id) > 1 ? 'i' : 'e' }} assegnat{{
              countClasses(materia._id) > 1 ? 'e' : 'a' }}
            </div>
          </div>
        </div>
        } @empty {
        <div class="col-12">
          <p class="text-muted">Nessuna materia assegnata</p>
        </div>
        }
      </div>
    </section>
  </div>
</div>
} @else if(authService.user?.role === 'student') {
<div class="row mt-5 pb-5">
  <div class="col-12">
    <section class="form-section">
      <label for="name" class="form-label text-dark mb-4"
        >Materie seguite</label
      >
      <div class="row">
        @for(materia of getMaterie(); track $index) {
        <div class="col-4 mb-3">
          <div class="card overflow-hidden position-relative">
            <fa-icon [icon]="BookIcon" [size]="'lg'" id="bookIcon" />
            <div class="card-body">
              <h5 class="card-title">{{ materia.name }}</h5>
              {{ countClasses(materia._id) || 'Nessuna' }} class{{
              countClasses(materia._id) > 1 ? 'i' : 'e' }}
            </div>
          </div>
        </div>
        } @empty {
        <div class="col-12">
          <p class="text-muted">Nessuna materia assegnata</p>
        </div>
        }
      </div>
    </section>
  </div>
</div>
}
